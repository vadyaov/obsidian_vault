#done #opened

Практически в любой нетривиальной программе ключевой задачей является управление ресурсами.
>[!info]
>Ресурс - это нечто, что нужно сначала заполучить, а позднее (явно или неявно) освободить.
>Например, память, блокировки, сокеты, дескрипторы потоков и файловые дескрипторы.

Стандартная библиотека разработана в манере, помогающей избегать утечки ресурсов. С этой целью она опирается на такие базовые средства языка, как конструкторы/деструкторы, гарантирующие, что захваченные ресурсы не переживут отвечающих за них объектов.

Такой подход отлично взаимодействует с обработкой ошибок посредством исключений. К примеру, эта техника используется в стандартной библиотеке в классах блокировок:
```cpp
mutex m; // контролирует доступ к разделяемым данным
// ...
void f()
{
	unique_lock<mutex> lck {m}; // захват мьютекса m
	// ... манипулируем разделяемыми данными
}
```
Поток (`thread`) не будет исполняться, пока конструктор для `lck` не захватит свой семафор `m`.
> [!tip]
> mutex - mutual extension, взаимное исключение; иногда называют исключающими семафорами.

Соответствующий деструктор будет освобождать этот ресурс. В этом примере деструктор класса `unique_lock` освобождает мьютекс тогда, когда поток исполнения покинет функцию `f()` (посредством корректного возврата или же, скажем, за счет генерации исключения).

Это является реализацией фундаментальной техники "**Захват ресурса есть Инициализация**".