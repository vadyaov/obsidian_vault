Impala C++ код следует модифицированной версии руководства по стилю C++ от Google: [https://google.github.io/styleguide/cppguide.html](https://google.github.io/styleguide/cppguide.html)

Здесь задокументированы некоторые ключевые отличия.

### **Заголовочные файлы**
Раздельные заголовочные файлы для inline-функций: мы разрешаем размещать inline-функции в отдельных файлах с суффиксом `.inline.h`. Это может ускорить время компиляции, уменьшая объем кода, который нужно компилировать, и сокращая зависимости между заголовочными файлами. Защита от повторного включения заголовков: для нового кода мы предпочитаем `#pragma` once, так как это более чистый способ по сравнению с классическими `#include` guards. Именование переменных Для констант мы используем `UPPER_CASE` вместо `kConstantName`.

### **Область видимости**
**Пространства имен:** директива `using namespace` разрешена в `.cc` файлах в ограниченных случаях, когда это значительно сокращает объем кода.
- **Плюсы:** уменьшает объем кода, снижает необходимость частых изменений в директивах "using namespace::class".
- **Минусы:** загрязняет пространство имен, вызывает конфликты, усложняет определение типа объекта.

### **Комментирование**
**Комментарии TODO:** обычно мы не включаем имя в комментарий TODO. По возможности лучше сразу исправить TODO (если это небольшая задача) или создать задачу в JIRA для отслеживания более значительного улучшения


### **Форматирование**

Файл `.clang-format`, который хранится в репозитории Impala, следует использовать для форматирования пробелов (см. "Contributing to Impala" для дополнительной информации). Файл `.clang-format` является основным источником для форматирования пробелов, за исключением случаев, когда его результат существенно отличается от практик в существующем коде или от здравого смысла. В таких случаях `.clang-format` следует обновить. Мы стремимся постепенно адаптировать кодовую базу к выводу clang-format, поэтому рекомендуем использовать его только на строках с изменениями, не связанными с пробелами. Это можно сделать с помощью инструмента `git-clang-format`.

Вы можете использовать `clang-format` или `clang-format-diff` для форматирования пробелов в C++ частях вашего патча, используя файл `.clang-format`, включенный в репозиторий git, который настроен таким образом, чтобы максимально соответствовать нашему текущему стилю кодирования. При подаче патча, отформатированного с помощью `clang-format`, пожалуйста, не переформатируйте весь файл, над которым вы работаете, а только те части, которые вы изменяете.

Некоторые ключевые отличия от стиля C++ Google:

1. **Длина строки:** мы используем длину строки в 90 символов.
2. **Объявление функций:** мы переносим строки иначе, чем Google, обычно размещая больше параметров в одной строке, например:
   - **Рекомендации Google:**
     ```cpp
     ReturnType LongClassName::ReallyReallyReallyLongFunctionName(
         Type par_name1,  // Отступ в 4 пробела
         Type par_name2,
         Type par_name3) {
       DoSomething();  // Отступ в 2 пробела
       ...
     }
     ```
   - **Мы используем:**
     ```cpp
     ReturnType LongClassName::ReallyReallyReallyLongFunctionName(
         Type par_name1, Type par_name2, Type par_name3) {  // Отступ в 4 пробела
       DoSomething();  // Отступ в 2 пробела
       ...
     }
     ```
3. **Условные операторы:** мы форматируем условные операторы следующим образом:
   - **Рекомендации Google:**
     ```cpp
     if (x == kFoo) return new Foo();
     if (condition)
       DoSomething();  // Отступ в 2 пробела.
     if (condition) {
       DoSomething();  // Отступ в 2 пробела.
     }
     ```
   - **Мы используем:**
     ```cpp
     if (x == kFoo) return new Foo();  // Если вся строка помещается в 90 символов
     if (condition) {
       DoSomething();  // В остальных случаях отступ в 2 пробела.
     }
     ``